<!DOCTYPE html>
<html>
<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/admin_dash.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <h6 class="navbar-brand text-white mt-2 " >{{my_user.username}}'s Dashboard</h6>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/home/{{ my_user.username }}/{{ my_user.id }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/{{ my_user.username }}/{{ my_user.id }}/scores">Scores</a></li>
                    <li class="nav-item"><a class="nav-link" href="/{{ my_user.username }}/summary">Summary</a></li>
                    <li class="nav-item"><a class="nav-link" href="/login">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="dash-header d-flex justify-content-between align-items-center p-3 border-buttom">
            <form action="/user/search/{{ my_user.id }}" class="d-flex gap-2 w-30">
            <input type="text" class="form-control rounded-pill" placeholder="Search" name="search">
            <select name="option"  class="form-select w-auto rounded-pill">
                <option selected>Select</option>
                <option value="sub">Subject</option>
                <option value="chap">Chapter</option>
                <option value="quiz">Quiz</option>
                <input type="submit" value="Search" class="btn btn-outline-success rounded-pill px-4">
            </select>
            </form>
            <span class="fw-bold text-primary">Welcome {{my_user.username}}</span>
        </div>

        <div class="container mt-4 card">
            <h4 class="text-center mt-3 mb-3">Upcomming Quizzes</h4>
            {% if quizzes %}
            <table >
                <thead class="bg-primary text-center rounded-3 text-white" style="height: 40px;">
                    <tr >
                        <th class="rounded-start">ID</th>
                        <th>Quiz Name</th>
                        <th>No. of Questions</th>
                        <th>Date</th>
                        <th>Duration (hh:mm)</th>
                        <th class="rounded-end">Action</th>
                    </tr>
                </thead>
                <tbody style="height: 50px;" >
                    {% for quiz in quizzes %}
                    <tr class="text-center p-4 align-middle" style="height: 40px;">
                        <td>{{ quiz.quiz_id }}</td>
                        <td>{{ quiz.quiz_name }}</td>
                        <td>{{ quiz.questions|length }}</td>
                        <td>{{ quiz.date_of_quiz.strftime('%d/%m/%Y') }}</td>
                        <td>{{ quiz.duration }} minutes</td>
                        <td>
                            <a href="/{{my_user.username}}/{{ my_user.id }}/view_quiz/{{ quiz.quiz_id }}" class="btn btn-sm btn-outline-primary">view</a>
                            <a href="{{ url_for('start_quiz',username=my_user.username, user_id=user_id, quiz_id=quiz.quiz_id, ques_index=0)}}" class="btn btn-sm btn-outline-success">start</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                
            </table>
            {% else %}
            <p class="text-center text-danger">No upcomming quizzes available.</p>
            {% endif %}
        </div>
    </div>
</body>
</html>