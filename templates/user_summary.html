<!DOCTYPE html>
<html>
<head>
    <title>User Summary</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/admin_dash.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <h6 class="navbar-brand text-white mt-2 " >{{my_user.username}}'s Summary</h6>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/home/{{ my_user.username }}/{{ my_user.id }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/{{ my_user.username }}/{{ my_user.id }}/scores">Scores</a></li>
                    <li class="nav-item"><a class="nav-link" href="/{{ my_user.username }}/summary">Summary</a></li>
                    <li class="nav-item"><a class="nav-link" href="/login">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="card p-4 rounded-3">
            <h2 class="text-center mb-2 text-primary">Summary for {{ my_user.username }}</h2>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <div class="p-3 ">
                    <p><strong>Full Name:</strong> {{ my_user.full_name }}</p>
                    <p><strong>Email:</strong> {{ my_user.email }}</p>
                    <p><strong>Qualification:</strong> {{ my_user.qualification }}</p>
                    <p><strong>Date of Birth:</strong> {{ my_user.dob }}</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 ">
                        <p><strong>Total Quizzes Attempted:</strong> {{ total }}</p>
                        <p><strong>Average Score:</strong> {{ avg|round(2) }}</p>
                        <p><strong>Best Score:</strong> {{ best }}</p>
                        <p><strong>Worst Score:</strong> {{ worst }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <h3 class="text-center">Subject wise Performance</h3>
            <div class="table-responsive text-center">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="rounded-start bg-primary bg-gradient text-white">Subject</th>
                            <th  class="bg-primary bg-gradient text-white">Quizzes Attempts</th>
                            <th class="rounded-end bg-primary bg-gradient text-white">Average Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in sub_performance %}
                        <tr>
                            <td>{{ row[0] }}</td>
                            <td>{{ row[1] }}</td>
                            <td>{{ row[2] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md-6">
                <div class="mt-4 card text-center">
                    <div class="card-body">
                        <h2>Performance Chart</h2>
                    <img src="{{ url_for('static',filename=username+'_performance.png')}}" alt="Performance Chart" style="width: 400px; height:auto;">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mt-4 card text-center">
                    <div class="card-body">
                        <h2>Performace Trend</h2>
                    <img src="{{ url_for('static',filename=username+'_trend.png')}}" alt="Performance Trend" style="width: 400px; height:auto;">
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-2 mb-5"><a href="/home/{{ my_user.username }}/{{ my_user.id }}" class="btn btn-outline-danger">Back to Dashboard</a></div>

    </div>
    
</body>
</html>